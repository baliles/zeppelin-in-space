#!/usr/bin/env bash
# bin/compile <build-dir> <cache-dir> <env-dir>
# heroku inline buildpack

set -e

build_dir=$1
cache_dir=$2
env_dir=$3
bp_dir=$(dirname $(dirname $0))

cd $build_dir

echo -n "-----> Installing Zeppelin..."
curl -s https://s3.amazonaws.com/heroku-spark/zeppelin-0.6.0-bin-netinst.tgz | tar xz
mv zeppelin-0.6.0-bin-netinst zeppelin-home
mv $bp_dir/conf/zeppelin-env.sh $build_dir/zeppelin-home/conf
mv $bp_dir/conf/zeppelin-site.xml $build_dir/zeppelin-home/conf
mv $bp_dir/conf/log4j.properties $build_dir/zeppelin-home/conf
curl -L -s https://s3.amazonaws.com/heroku-spark/postgresql-9.4.1209.jar > $build_dir/zeppelin-home/lib/postgresql-jdbc.jar
echo " Done."




